<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>写博客也要讲基本法</title><link href="http://zhao-ji.github.io/" rel="alternate"></link><link href="http://zhao-ji.github.io/feeds/network.atom.xml" rel="self"></link><id>http://zhao-ji.github.io/</id><updated>2015-01-13T12:16:00+08:00</updated><entry><title>Socks5协议</title><link href="http://zhao-ji.github.io/2015/socks5xie-yi.html" rel="alternate"></link><updated>2015-01-13T12:16:00+08:00</updated><author><name>Nightwish</name></author><id>tag:zhao-ji.github.io,2015-01-13:2015/socks5xie-yi.html</id><summary type="html">&lt;p&gt;===========================&lt;/p&gt;
&lt;h2&gt;socks5 协议&lt;/h2&gt;
&lt;h4&gt;特点&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;标准 RFC1928&lt;/li&gt;
&lt;li&gt;socks4 的改进版本&lt;/li&gt;
&lt;li&gt;增加了用户名密码认证&lt;/li&gt;
&lt;li&gt;增加了DNS域名查询&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;握手经过&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;客户端发起&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;field1&lt;/th&gt;
&lt;th align="center"&gt;field2&lt;/th&gt;
&lt;th align="center"&gt;field3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;1 byte per method&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;版本号&lt;/td&gt;
&lt;td align="center"&gt;支持的认证方法数量&lt;/td&gt;
&lt;td align="center"&gt;认证方式代码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;\x05&lt;/td&gt;
&lt;td align="center"&gt;\x00&lt;/td&gt;
&lt;td align="center"&gt;\x00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;服务端返回&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;field1&lt;/th&gt;
&lt;th align="center"&gt;field2&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;1 bytes&lt;/td&gt;
&lt;td align="center"&gt;1 bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;版本号&lt;/td&gt;
&lt;td align="center"&gt;认证方式代码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;\x05&lt;/td&gt;
&lt;td align="center"&gt;\x00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4&gt;传送数据&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;客户端请求&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;协议版本号&lt;/th&gt;
&lt;th align="center"&gt;请求类别&lt;/th&gt;
&lt;th align="center"&gt;保留位&lt;/th&gt;
&lt;th align="center"&gt;地址类型&lt;/th&gt;
&lt;th align="center"&gt;目的地址&lt;/th&gt;
&lt;th align="center"&gt;端口号&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;dynamic&lt;/td&gt;
&lt;td align="center"&gt;2 byte&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;\x05&lt;/td&gt;
&lt;td align="center"&gt;\x01&lt;/td&gt;
&lt;td align="center"&gt;\x00&lt;/td&gt;
&lt;td align="center"&gt;\x01&lt;/td&gt;
&lt;td align="center"&gt;&lt;strong&gt;4 bytes of IPv4&lt;/strong&gt; &lt;strong&gt;16bytes of IPv6&lt;/strong&gt; &lt;strong&gt;1 byte of name length and the name&lt;/strong&gt;&lt;/td&gt;
&lt;td align="center"&gt;\x08\x00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;服务端返回&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;版本号&lt;/th&gt;
&lt;th align="center"&gt;状态&lt;/th&gt;
&lt;th align="center"&gt;保留字段&lt;/th&gt;
&lt;th align="center"&gt;地址类型&lt;/th&gt;
&lt;th align="center"&gt;目的地址&lt;/th&gt;
&lt;th align="center"&gt;端口号&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;1 byte&lt;/td&gt;
&lt;td align="center"&gt;跟客户端请求一致&lt;/td&gt;
&lt;td align="center"&gt;2 bytes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;\x05&lt;/td&gt;
&lt;td align="center"&gt;\x00&lt;/td&gt;
&lt;td align="center"&gt;\x00&lt;/td&gt;
&lt;td align="center"&gt;\x01&lt;/td&gt;
&lt;td align="center"&gt;as the client&lt;/td&gt;
&lt;td align="center"&gt;\x08\x00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</summary></entry><entry><title>netcat 使用笔记</title><link href="http://zhao-ji.github.io/2015/netcat-shi-yong-bi-ji.html" rel="alternate"></link><updated>2015-01-12T20:00:00+08:00</updated><author><name>Nightwish</name></author><id>tag:zhao-ji.github.io,2015-01-12:2015/netcat-shi-yong-bi-ji.html</id><summary type="html">&lt;p&gt;======================&lt;/p&gt;
&lt;h2&gt;netcat 三个例子&lt;/h2&gt;
&lt;h3&gt;本地 client-server socket 模式&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;服务端：
    nc -l 666&lt;/li&gt;
&lt;li&gt;客户端：
    nc localhost 666&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;用 nc 传送文件&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;服务端：
    nc -l 666 | tee new_file.txt&lt;/li&gt;
&lt;li&gt;客户端：
    cat file.txt | nc localhost 666&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;永不断开的服务端&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;服务端：
    nc -k -l 666&lt;/li&gt;
&lt;li&gt;客户端：
    nc localhost 666&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;端口扫描&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nc -zv example.com 1-65536 2&amp;gt;&amp;amp;1| grep succee&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;服务端启用执行 SHELL&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;服务端
    nc -l 666 -e /bin/sh&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;netcat 参数详解&lt;/h2&gt;
&lt;h3&gt;两端都适用的参数&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;-u UDP连接&lt;/li&gt;
&lt;li&gt;-4 IPV4 -6 IPV6&lt;/li&gt;
&lt;li&gt;-d 不接受 stdin 的输入&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;服务端适用的参数&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;-k 即使客户端断开，服务端也不断&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;客户端适用的参数&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;-w 10 十秒接受不到内容就断开&lt;/li&gt;
&lt;li&gt;-n 不查询DNS&lt;/li&gt;
&lt;li&gt;-p 设置源端口&lt;/li&gt;
&lt;/ul&gt;</summary></entry></feed>